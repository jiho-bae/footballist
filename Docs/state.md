# api콜 횟수와 관련되어 상태관리를 어떻게 해야할까?

home 페이지를 오갈 때 마다 scorebat api가 1회 호출된다.
scorebat api는 호출수가 크게 제한되지 않지만, 다음에 작업할 football-data api는 1분에 6회?정도로 제한된다고 알고있다.
이 제한사항 때문에 나 혼자 사용해도 새로고침 몇번이면 데이터를 받기 위해서 1분을 기다려야 할 지도 모른다.

결국에는 api 콜을 줄여보는게 좋겠다.

방법은......

1. api 콜을 App.tsx에 선언하여 필요한 데이터를 다 가지고 있자.
- 이렇게 하면 router로 페이지를 넘나들어도, api 콜은 1회만 수행된다.
- 물론 새로고침을 시도할 때는 api가 재호출된다.

2. 상태관리 라이브러리?
- 1번처럼 루트로 상태를 옮겨서 전역상태화하면... League 페이지에서는 props drilling이 꽤 많이 일어날 듯.
    - 물론 아직은 홈-하이라이트 상세 정도의 뎁스긴 하다.
- api 콜을 아끼기 위해 상태관리라이브러리에서 제공하는 캐싱기능을 활용하는 것이 좋아보인다.

3. netlif 서버에 proxy를 달아서 데이터를 캐싱할 수 있을까..?
- 이건 우선 공부해봐야한다. 되는지도 잘 모른다.
- 캐싱한 데이터의 재요청시기도 정해야한다.
- 음.. 사실 잘 모르겠고 여러모로 고민할게 많아보이긴 한다.
- 그래도 scorebat, football-data api가 실시간으로 갱신이 필요한 느낌은 아니다보니 가능하다면 괜찮아보이긴 하지만.


### 상태관리 라이브러리!.
recoil
- redux/context에 비해 보일러플레이트가 적어 도입이 쉽다.
- 전역상태로는 하이라이트 비디오들 / 리그 데이터면 충분하다.
    - (나중에 추가될만한 것은 favorite 정도?)
- selector로 캐싱을 제공한다.
- 현재 fetch 도중에 보여주는 loader ui가 없으므로, suspense와 함께 loader ui를 추가한다.
- ErrorBoundary를 제대로 써본 적은 없었으니, 이번기회에 배우고 고민해본다.